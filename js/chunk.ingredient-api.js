/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunksandandsky_styleguides"] = self["webpackChunksandandsky_styleguides"] || []).push([["ingredient-api"],{

/***/ "./src/js/modules/ingredient-api.js":
/*!******************************************!*\
  !*** ./src/js/modules/ingredient-api.js ***!
  \******************************************/
/***/ (() => {

eval("var token = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZjQzZGQ4MzdjMzAxMzM2OWM4ODJlYjQiLCJjbGllbnRuYW1lIjoic2FuZCBhbmQgc2t5IiwidXNlcm5hbWUiOiJzYW5kc2t5IiwicGFzc3dvcmQiOiIkMmEkMTAkWjNwRzNkUG8vUW16MjVLeTRFbUFUdVJDV1MzL0ZndHRUVHRwd2xxaFZmb1pMNmxBWThyL08iLCJlbWFpbCI6InJoaWFubmUuY2xpZmZvcmRAc3VwZXJub3ZhYnJhbmRzLmNvbSIsInBhY2thZ2UiOiJ1bHRhIGNvbnNjaW91cyBiZWF1dHkiLCJwZXJtaXNzaW9uIjoib3duZXIiLCJpYXQiOjE2MjQzODk4MjZ9.fxRhjKnsENhUOivqcDzzzzTZtBaeEy6l3Qp5j43d3Tg';\nvar cname = 'sand and sky';\n\nvar toCapitalize = function toCapitalize(text) {\n  var upperCase = text.toLowerCase().replace(/\\b[a-z]/g, function (letter) {\n    return letter.toUpperCase();\n  });\n  return upperCase;\n};\n\nvar listIngredients = function listIngredients(ingredientArray) {\n  var serialize = '';\n\n  if (ingredientArray.length > 0) {\n    for (var i = 0; i <= ingredientArray.length - 1; i += 1) {\n      var ingName = ingredientArray[i].ingredientName;\n      var note = ingredientArray[i].retailerNote;\n      var upperCase = toCapitalize(ingName);\n      var speciality = ingredientArray[i].specialty;\n      var isLast = ingredientArray.length - 1 === i;\n      serialize += \"<a href=\\\"#\\\" class=\\\"d-inline-block text-body text-capitalize mr-1\\\" data-toggle=\\\"modal\\\" data-target=\\\"#ingredientModal\\\" data-name=\\\"\".concat(ingName, \"\\\" data-note=\\\"\").concat(note, \"\\\" data-speciality=\\\"\").concat(speciality, \"\\\">\").concat(upperCase).concat(isLast ? '' : ',', \"</a>\");\n    }\n  }\n\n  return serialize;\n};\n\nvar parseIngredients = function parseIngredients(responseData) {\n  var html = '';\n\n  if (responseData.productIngredients.length > 0) {\n    $.each(responseData.productIngredients, function (k, obj) {\n      if (obj.functionGroup.length > 0) {\n        $.each(obj.functionGroup, function (l, obj2) {\n          html += listIngredients(obj2.ingredients);\n        });\n      }\n    });\n  }\n\n  return html;\n}; // test mode data\n\n\n$(document).ready(function () {\n  var sku = $('#collapseIngredients').data('sku');\n  var params = {\n    async: true,\n    crossDomain: true,\n    contentType: 'application/json',\n    url: \"https://server.clearforme.com/api/app/products/details?sku=\".concat(sku, \"&clientname=\").concat(cname),\n    method: 'GET',\n    beforeSend: function beforeSend(xhr) {\n      xhr.setRequestHeader('Authorization', \"Bearer \".concat(token));\n    },\n    processData: false,\n    error: function error() {\n      console.log('api cfm error - sku not found');\n    }\n  };\n  $.ajax(params).done(function (response) {\n    var ingredientHtml = parseIngredients(response);\n    $('.tab-ingredient__content').html(ingredientHtml);\n    $('.tab-ingredient__learn-more').removeClass('d-none');\n  });\n});\n$('#ingredientModal').on('show.bs.modal', function (event) {\n  $('.tab-ingredient__modal-title').addClass('d-none');\n  $('.tab-ingredient__modal-definition').addClass('d-none');\n  $('.tab-ingredient__modal-note').addClass('d-none');\n  $('.tab-ingredient__modal-quality').addClass('d-none');\n  $('.tab-ingredient__modal-func').addClass('d-none');\n  var triggerBtn = $(event.relatedTarget).attr('data-name');\n  var dataNote = $(event.relatedTarget).attr('data-note');\n  var sku = $('#collapseIngredients').data('sku');\n  var dataSp = $(event.relatedTarget).attr('data-speciality');\n  var params = {\n    async: true,\n    crossDomain: true,\n    contentType: 'application/json',\n    url: \"https://server.clearforme.com/api/app/ingredients/definition?sku=\".concat(sku, \"&ingredientName=\").concat(triggerBtn, \"&clientname=\").concat(cname),\n    method: 'GET',\n    beforeSend: function beforeSend(xhr) {\n      xhr.setRequestHeader('Authorization', \"Bearer \".concat(token));\n    },\n    processData: false\n  };\n  $.ajax(params).done(function (response) {\n    var cfmAttributes = response.cfmIngredientAttributes;\n    var cfmAttributesString = [];\n\n    if (cfmAttributes.length > 0) {\n      for (var i = 0; i <= cfmAttributes.length - 1; i += 1) {\n        cfmAttributesString[i] = cfmAttributes[i].attribute;\n      }\n    }\n\n    $('.tab-ingredient__modal-title').html(toCapitalize(triggerBtn)).removeClass('d-none');\n    $('.tab-ingredient__modal-definition').html(\"<strong>Definition: </strong>\".concat(response.definition)).removeClass('d-none');\n\n    if (dataNote !== '') {\n      $('.tab-ingredient__modal-note').html(\"<strong>Note:</strong> \".concat(dataNote)).removeClass('d-none');\n    }\n\n    if (cfmAttributesString.length > 0) {\n      $('.tab-ingredient__modal-func').html(\"<strong>Functions: </strong>\".concat(cfmAttributesString.join(', '), \".\")).removeClass('d-none');\n    }\n\n    if (dataSp !== '') {\n      $('.tab-ingredient__modal-quality').html(\"<strong>Qualities: </strong>\".concat(dataSp)).removeClass('d-none');\n    }\n  });\n});\n\n//# sourceURL=webpack://sandandsky-styleguides/./src/js/modules/ingredient-api.js?");

/***/ }),

/***/ "./src/js/modules/predictive-search.js":
/*!*********************************************!*\
  !*** ./src/js/modules/predictive-search.js ***!
  \*********************************************/
/***/ (() => {

eval("var searchNode = $('input[name=q]');\nvar searchClear = $('.search-box__clear');\nvar searchNoResult = $('.search-box__no-result');\nvar searchHome = $('.search-box__home');\nvar searchResult = $('.search-box__result');\nvar searchTag = $('.search-box__tag');\nvar _Search = {\n  init: function init() {\n    this.inputEventListener();\n  },\n  inputEventListener: function inputEventListener() {\n    var input = searchNode;\n    input.on(\"keyup\", _Search.debounce(function (evt) {\n      console.log('keyup', evt);\n\n      if (evt.target.value == '') {\n        searchClear.addClass('disabled');\n        searchNoResult.hide();\n      } else {\n        searchClear.removeClass('disabled');\n      }\n\n      _Search.search(evt.target.value);\n    }, 500));\n\n    _Search.keywordListener(input); // _Search.navigation()\n\n\n    searchClear.on('click', function () {\n      _Search.clear();\n    });\n    $('header .sni__search, .search-box__top .sni__times').on('click', function () {\n      _Search.searchBoxToggle();\n    });\n  },\n  searchBoxToggle: function searchBoxToggle() {\n    $('.search-box').toggleClass('show');\n    $('body').toggleClass('search-box-active');\n  },\n  keywordListener: function keywordListener(input) {\n    searchTag.on('click', function (evt) {\n      input.val(evt.target.textContent);\n\n      _Search.search(evt.target.textContent);\n\n      searchClear.removeClass('disabled');\n    });\n  },\n  search: function search(keyword) {\n    console.log(keyword);\n\n    _Search.loading(true);\n\n    searchNoResult.hide();\n    searchHome.hide();\n    searchResult.hide();\n\n    if (keyword == '') {\n      _Search.loading(false);\n\n      searchResult.hide();\n      searchHome.show();\n      return;\n    }\n\n    searchResult.show();\n\n    _Search.loading(false);\n    /*\n    jQuery.getJSON(\"/search/suggest.json\", {\n    \t\"q\": keyword,\n    \t\"resources\": {\n    \t\t\"type\": \"product\",\n    \t\t\"options\": {\n    \t\t\t\"unavailable_products\": \"last\",\n    \t\t\t\"fields\": \"tag,title\"\n    \t\t}\n    \t}\n    }).done(function(response) {\n    \tconsole.log(response)\n    \tvar productSuggestions = response.resources.results.products;\n    \tif (productSuggestions.length > 0) {\n    \t\tconsole.log(productSuggestions)\n    \t\tvar firstProductSuggestion = productSuggestions[0];\n    \t\t_Search.buildResult(productSuggestions)\n    \t\tsearchResult.show()\n    \t\t_Search.loading(false)\n    \t\tga('send', 'event', 'ProductSearch', 'SearchKeyword', keyword);\n    \t\tif (dataLayer) {\n    \t\t\tdataLayer.push({event: 'ProductSearch', search_term: keyword})\n    \t\t}\n    \t} else {\n    \t\tsearchNoResult.show()\n    \t\tsearchHome.show()\n    \t\t_Search.loading(false)\n    \t}\n    });\n    */\n\n  },\n  buildResult: function buildResult(results) {\n    var $search_container = $('#search-products');\n    $search_container.empty();\n    var items = [],\n        item = {},\n        data = {},\n        source = $('#searchRowTemplate').html(),\n        template = Handlebars.compile(source);\n    results = results.filter(function (i, index) {\n      return i.type == 'HERO' || i.type == 'BUNDLE';\n    });\n    $.each(results, function (index, item) {\n      var range = 'Aussie Skincare Essentials';\n\n      if (item.title.includes('Tasmanian Spring Water')) {\n        range = 'Tasmanian Spring Water';\n      } else if (item.title.includes('Australian Pink Clay')) {\n        range = 'Australian Pink Clay';\n      } else if (item.title.includes('Australian Emu Apple')) {\n        range = 'Australian Emu Apple';\n      }\n\n      item = {\n        product_id: item.id,\n        img: item.image,\n        title: item.title.replace(range, ''),\n        handle: item.handle,\n        price: item.price,\n        url: item.url,\n        range: range\n      };\n      items.push(item);\n    });\n    var result_heading = $('.search-nav__result-wrapper').attr('data-heading');\n\n    if (results.length > 0) {\n      info = result_heading.replace('{{total}}', results.length);\n    }\n\n    data = {\n      items: items\n    };\n\n    _Search.loading(false);\n\n    $search_container.append(template(data));\n    $('.result-heading').html(info);\n\n    _Search.navigation();\n  },\n  debounce: function debounce(func, wait, immediate) {\n    var timeout;\n    return function () {\n      var context = this,\n          args = arguments;\n      clearTimeout(timeout);\n      timeout = setTimeout(function () {\n        timeout = null;\n        if (!immediate) func.apply(context, args);\n      }, wait);\n      if (immediate && !timeout) func.apply(context, args);\n    };\n  },\n  loading: function loading(state) {\n    if (state) {\n      $('.lds-ring').addClass('active');\n      $('.search-nav__footer').hide();\n    } else {\n      $('.lds-ring').removeClass('active');\n      $('.search-nav__footer').show();\n    }\n  },\n  clear: function clear() {\n    searchNode.val('');\n    searchResult.hide();\n    searchHome.show();\n    searchClear.addClass('disabled');\n    searchNoResult.hide();\n  },\n  panelToggle: function panelToggle() {\n    $('.mega-search-wrapper').toggleClass('active');\n    $('body').toggleClass('body-search-open');\n\n    if ($('.mega-search-wrapper').hasClass('active')) {\n      var userDomain = window.location.hostname.split('.')[0];\n\n      if (userDomain == 'us' || userDomain == 'www') {// hj('trigger', 'search_box');\n      }\n\n      document.getElementById('searchq').focus();\n    }\n  },\n  navigation: function navigation() {\n    var contentWidth = $('.item-link').length * 200 - 30;\n    var container = $('.search-nav__result').innerWidth();\n    var elem = $(\".search-nav__result-wrapper\");\n    var offset = elem.offset().left - elem.parent().offset().left;\n\n    if (contentWidth <= container) {\n      $('.search-nav__result-nav-right').addClass('disabled');\n    } else {\n      $('.search-nav__result-nav-right').removeClass('disabled');\n    }\n\n    $('.search-nav__result-nav-right').off().on('click', function () {\n      var elem = $(\".search-nav__result-wrapper\");\n      var offset = elem.offset().left - elem.parent().offset().left;\n      var move = offset - container;\n      var spaceleft = contentWidth - move * -1;\n      elem.css('transform', 'translateX(' + move + 'px)');\n\n      if (spaceleft <= container) {\n        $('.search-nav__result-nav-right').addClass('disabled');\n      } else {\n        $('.search-nav__result-nav-right').removeClass('disabled');\n      }\n\n      if (move == 0) {\n        $('.search-nav__result-nav-left').addClass('disabled');\n      } else {\n        $('.search-nav__result-nav-left').removeClass('disabled');\n      }\n    });\n    $('.search-nav__result-nav-left').off().on('click', function () {\n      var elem = $(\".search-nav__result-wrapper\");\n      var offset = elem.offset().left - elem.parent().offset().left;\n      var move = offset + container;\n      var spaceleft = contentWidth - move * -1;\n      elem.css('transform', 'translateX(' + move + 'px)');\n\n      if (spaceleft <= container) {\n        $('.search-nav__result-nav-right').addClass('disabled');\n      } else {\n        $('.search-nav__result-nav-right').removeClass('disabled');\n      }\n\n      if (move == 0) {\n        $('.search-nav__result-nav-left').addClass('disabled');\n      } else {\n        $('.search-nav__result-nav-left').removeClass('disabled');\n      }\n    });\n  }\n};\n$(document).ready(function () {\n  _Search.init();\n});\n\n//# sourceURL=webpack://sandandsky-styleguides/./src/js/modules/predictive-search.js?");

/***/ })

}]);